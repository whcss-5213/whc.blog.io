import{t as s,v as a,x as t,y as e}from"./chunks/vue-vendor.Dy165Sj9.js";import"./app.pJ3HJJam.js";import"./chunks/vendor.CimhImBR.js";const b=JSON.parse('{"title":"Git","description":"","frontmatter":{},"headers":[],"relativePath":"git/index.md","filePath":"tools/git/index.md"}'),l={name:"git/index.md"};function n(h,i,d,p,r,k){return t(),a("div",null,i[0]||(i[0]=[e(`<h1 id="git" tabindex="-1">Git <a class="header-anchor" href="#git" aria-label="Permalink to &quot;Git&quot;">​</a></h1><h2 id="初始化" tabindex="-1">初始化 <a class="header-anchor" href="#初始化" aria-label="Permalink to &quot;初始化&quot;">​</a></h2><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user.name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;填写自己的用户名&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 配置个人用户名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user.email</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;填写自己的邮箱号&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 电子邮件地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> core.autocrlf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 结束符CRLF和LF 之间转换</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="git-status" tabindex="-1">git status <a class="header-anchor" href="#git-status" aria-label="Permalink to &quot;git status&quot;">​</a></h2><p>查看当前文件的状态</p><h2 id="git-stash" tabindex="-1">git stash <a class="header-anchor" href="#git-stash" aria-label="Permalink to &quot;git stash&quot;">​</a></h2><p>将当前工作目录中尚未提交的所有更改（包括暂存区和未暂存的修改）临时存储到 stash 堆栈中</p><ul><li>git stash save<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> save</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;注释&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -u 表示还工作区中新增的文件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 不加u只会存储工作区中已经存在的文件的修改</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li>git stash list</li><li>git stash push 同 save</li><li>git stash pop 弹出</li><li>git stash apply 读</li><li>git stash drop 删</li></ul><h2 id="git-add" tabindex="-1">git add <a class="header-anchor" href="#git-add" aria-label="Permalink to &quot;git add&quot;">​</a></h2><ul><li><p>把指定的文件添加到暂存区中</p></li><li><p>git add <code>文件路径</code></p></li><li><p>添加所有修改、已删除的文件到暂存区中</p></li><li><p>git add -u <code>文件路径</code></p></li><li><p>git add --update <code>文件路径</code></p></li><li><p>添加所有修改、已删除、新增的文件到暂存区中，省略 <code>文件路径</code> 即为当前目录</p></li><li><p>git add -A <code>文件路径</code></p></li><li><p>git add --all <code>文件路径</code></p></li><li><p>查看所有修改、已删除但没有提交的文件，进入一个子命令系统</p></li><li><p>git add -i <code>文件路径</code></p></li><li><p>git add --interactive <code>文件路径</code></p></li></ul><h2 id="git-commit" tabindex="-1">git commit <a class="header-anchor" href="#git-commit" aria-label="Permalink to &quot;git commit&quot;">​</a></h2><ul><li><p>把暂存区中的文件提交到本地仓库，调用文本编辑器输入该次提交的描述信息</p></li><li><p>git commit</p></li><li><p>把暂存区中的文件提交到本地仓库中并添加描述信息</p></li><li><p>git commit -m&quot;<code>提交的描述信息</code>&quot;</p></li><li><p>把所有修改、已删除的文件提交到本地仓库中</p></li><li><p>不包括未被版本库跟踪的文件，等同于先调用了 &quot;git add -u&quot;</p></li><li><p>git commit -a -m &quot;<code>提交的描述信息</code>&quot;</p></li><li><p>修改上次提交的描述信息</p></li><li><p>git commit --amend</p></li><li><p>git commit --amend --no-edit</p></li></ul><h2 id="git-log" tabindex="-1">git log <a class="header-anchor" href="#git-log" aria-label="Permalink to &quot;git log&quot;">​</a></h2><p>显示提交的记录。</p><ul><li><p>git log</p></li><li><p>git log --pretty=oneline</p></li><li><p>git log --oneline</p></li><li><p>git log --pretty=short</p></li><li><p>空格 下翻页 b 上翻页 q 退出</p></li><li><p>打印从第一次提交到指定的提交的记录 git log <code>commit ID</code></p></li></ul><h3 id="git-shortlog" tabindex="-1">git shortlog <a class="header-anchor" href="#git-shortlog" aria-label="Permalink to &quot;git shortlog&quot;">​</a></h3><p>用于生成提交者的统计信息，它会按照提交者对提交的数量进行汇总并展示</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shortlog</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>-n 根据每个作者的提交数量对输出进行排序，而不是按照作者的字母顺序。</li><li>-s summary,省略 commit 的注释,只提供提交计数摘要。</li><li>-e 显示每个作者的电子邮件地址。</li></ul><h3 id="git-relog" tabindex="-1">git relog <a class="header-anchor" href="#git-relog" aria-label="Permalink to &quot;git relog&quot;">​</a></h3><h2 id="git-reset" tabindex="-1">git reset <a class="header-anchor" href="#git-reset" aria-label="Permalink to &quot;git reset&quot;">​</a></h2><h3 id="一、基础概念" tabindex="-1">一、基础概念 <a class="header-anchor" href="#一、基础概念" aria-label="Permalink to &quot;一、基础概念&quot;">​</a></h3><p><code>git reset</code>（重置）核心作用：<strong>修改本地仓库的 HEAD 指针指向</strong>，并可按需重置暂存区、工作区的代码状态，仅用于本地未推送到远程的提交（已推送提交禁止使用，会破坏公共历史）。</p><ul><li>核心逻辑：通过不同参数，控制「HEAD 指针移动范围」「暂存区是否重置」「工作区是否重置」，是本地撤销提交/暂存操作的核心命令。</li></ul><h3 id="二、核心参数详解-按重置范围划分" tabindex="-1">二、核心参数详解（按重置范围划分） <a class="header-anchor" href="#二、核心参数详解-按重置范围划分" aria-label="Permalink to &quot;二、核心参数详解（按重置范围划分）&quot;">​</a></h3><p><code>git reset</code> 默认为 <code>--mixed</code> 模式，三个核心参数的重置范围对比如下：</p><table tabindex="0"><thead><tr><th>参数</th><th>HEAD 指针（本地库）</th><th>暂存区</th><th>工作区</th><th>核心效果</th><th>通俗理解</th></tr></thead><tbody><tr><td><code>--soft</code></td><td>✅ 移动到指定节点</td><td>❌ 不变</td><td>❌ 不变</td><td>仅移动 HEAD 指针，暂存区/工作区代码保留（回到「已提交 → 未提交」状态）</td><td>撤销提交记录，但代码还在，可直接重新 commit</td></tr><tr><td><code>--mixed</code>（默认）</td><td>✅ 移动到指定节点</td><td>✅ 重置</td><td>❌ 不变</td><td>移动 HEAD 指针 + 重置暂存区（撤销 git add），工作区代码保留</td><td>撤销提交 + 撤销 git add，代码回到「未 add、未 commit」状态</td></tr><tr><td><code>--hard</code></td><td>✅ 移动到指定节点</td><td>✅ 重置</td><td>✅ 重置</td><td>移动 HEAD 指针 + 重置暂存区 + 重置工作区（代码直接回退到指定节点）</td><td>彻底回退，指定节点后的所有修改（提交/暂存/工作区）全部丢失，无法恢复</td></tr></tbody></table><h3 id="三、常用用法分类" tabindex="-1">三、常用用法分类 <a class="header-anchor" href="#三、常用用法分类" aria-label="Permalink to &quot;三、常用用法分类&quot;">​</a></h3><h4 id="_1-重置暂存区-撤销-git-add" tabindex="-1">1. 重置暂存区（撤销 git add） <a class="header-anchor" href="#_1-重置暂存区-撤销-git-add" aria-label="Permalink to &quot;1. 重置暂存区（撤销 git add）&quot;">​</a></h4><p>用于将已 <code>git add</code> 到暂存区的文件撤出，保留工作区修改（最常用场景）：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 撤销单个文件的 git add（默认 --mixed，可省略）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">文件路</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">径</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 等价写法（显式指定 --mixed）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mixed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">文件路</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">径</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 撤销所有文件的 git add</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 无文件路径，默认重置所有暂存区文件</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_2-回退提交记录-指定-commit-id" tabindex="-1">2. 回退提交记录（指定 commit ID） <a class="header-anchor" href="#_2-回退提交记录-指定-commit-id" aria-label="Permalink to &quot;2. 回退提交记录（指定 commit ID）&quot;">​</a></h4><p>用于将 HEAD 指针回退到指定历史提交节点，按需控制代码保留/删除：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --soft：仅回退提交记录，代码保留（暂存区/工作区不变）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --soft</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">commit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --mixed（默认）：回退提交 + 重置暂存区，代码保留（工作区不变）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">commit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 省略 --mixed</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mixed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">commit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --hard：彻底回退，代码也恢复到指定节点（慎用！）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">commit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3-相对引用回退-快速回退最近-n-次提交" tabindex="-1">3. 相对引用回退（快速回退最近 N 次提交） <a class="header-anchor" href="#_3-相对引用回退-快速回退最近-n-次提交" aria-label="Permalink to &quot;3. 相对引用回退（快速回退最近 N 次提交）&quot;">​</a></h4><p>无需查 commit ID，用 <code>HEAD~N</code> 或 <code>HEAD^^^</code> 快速回退：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 回退最近 3 次提交（--hard 模式，代码也重置）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD~3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 等价写法（^ 数量 = 回退步数）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD^^^</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 回退最近 1 次提交（最常用，保留代码用 --soft）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --soft</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD~1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 等价 git reset --soft HEAD^</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="四、关键注意事项-避坑必记" tabindex="-1">四、关键注意事项（避坑必记） <a class="header-anchor" href="#四、关键注意事项-避坑必记" aria-label="Permalink to &quot;四、关键注意事项（避坑必记）&quot;">​</a></h3><ol><li><strong>--hard 不可逆风险</strong>：<code>git reset --hard</code> 会直接删除工作区未提交的修改，且无法恢复，执行前务必用 <code>git status</code>/<code>git stash</code> 暂存重要修改；</li><li><strong>仅限本地使用</strong>：已推送到远程的提交，绝对禁止用 <code>git reset</code>（会导致本地和远程历史不一致），如需撤销已推送提交，改用 <code>git revert</code>；</li><li><strong>相对引用规则</strong>：<code>HEAD~N</code> 表示“HEAD 往前数 N 个提交”，<code>HEAD^</code> 等价 <code>HEAD~1</code>，<code>HEAD^^</code> 等价 <code>HEAD~2</code>，以此类推；</li><li><strong>重置后推送到远程</strong>：若重置后需推送（仅限个人分支），需强制推送 <code>git push -f</code>，公共分支禁止 <code>-f</code>。</li></ol><h3 id="五、常用场景示例" tabindex="-1">五、常用场景示例 <a class="header-anchor" href="#五、常用场景示例" aria-label="Permalink to &quot;五、常用场景示例&quot;">​</a></h3><h4 id="场景-1-撤销刚执行的-git-add-不想暂存了" tabindex="-1">场景 1：撤销刚执行的 <code>git add .</code>（不想暂存了） <a class="header-anchor" href="#场景-1-撤销刚执行的-git-add-不想暂存了" aria-label="Permalink to &quot;场景 1：撤销刚执行的 \`git add .\`（不想暂存了）&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 误把所有文件加入暂存区</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 重置所有暂存区文件，工作区修改保留</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="场景-2-撤销最近-1-次提交-保留代码-想重新修改后提交" tabindex="-1">场景 2：撤销最近 1 次提交（保留代码，想重新修改后提交） <a class="header-anchor" href="#场景-2-撤销最近-1-次提交-保留代码-想重新修改后提交" aria-label="Permalink to &quot;场景 2：撤销最近 1 次提交（保留代码，想重新修改后提交）&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;错误提交&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 提交后发现代码漏改</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --soft</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD~1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 撤销提交，代码仍在工作区/暂存区</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改代码后重新提交</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;修正后的提交&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="场景-3-彻底放弃最近的修改-回到-3-次提交前的版本" tabindex="-1">场景 3：彻底放弃最近的修改，回到 3 次提交前的版本 <a class="header-anchor" href="#场景-3-彻底放弃最近的修改-回到-3-次提交前的版本" aria-label="Permalink to &quot;场景 3：彻底放弃最近的修改，回到 3 次提交前的版本&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 确认当前修改无需保留，彻底回退</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD~3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 验证：工作区已恢复到 3 次提交前的状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 显示 &quot;working tree clean&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="场景-4-撤销单个文件的-git-add-仅撤出指定文件" tabindex="-1">场景 4：撤销单个文件的 git add（仅撤出指定文件） <a class="header-anchor" href="#场景-4-撤销单个文件的-git-add-仅撤出指定文件" aria-label="Permalink to &quot;场景 4：撤销单个文件的 git add（仅撤出指定文件）&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/utils.js</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/api.js</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 误加了两个文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/api.js</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 仅撤出 src/api.js，src/utils.js 仍在暂存区</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><ol><li><code>git reset</code> 核心是「移动 HEAD 指针 + 重置暂存区/工作区」，分 <code>--soft</code>（仅撤提交）、<code>--mixed</code>（撤提交+撤 add）、<code>--hard</code>（彻底回退）；</li><li>日常最常用：<code>git reset</code> 撤销 add、<code>git reset --soft HEAD~1</code> 撤销最近提交（保留代码）；</li><li>避坑核心：--hard 慎用、已推送提交不用 reset、公共分支不强制推送。</li></ol><h2 id="git-rebase" tabindex="-1">git rebase <a class="header-anchor" href="#git-rebase" aria-label="Permalink to &quot;git rebase&quot;">​</a></h2><h3 id="一、基础概念-1" tabindex="-1">一、基础概念 <a class="header-anchor" href="#一、基础概念-1" aria-label="Permalink to &quot;一、基础概念&quot;">​</a></h3><p><code>git rebase</code>（变基）核心作用：<strong>将一个分支的提交记录，“嫁接”到另一个分支的指定节点上</strong>，让提交历史保持线性、整洁，替代 <code>git merge</code> 避免产生分叉的合并节点。</p><ul><li>核心逻辑：找到两个分支的<strong>共同祖先节点</strong> → 把共同节点后当前分支的所有提交，重新嫁接到目标分支的最新节点上 → 嫁接后原提交的 commit ID 会改变（因为提交上下文变了）→ 最终移动 HEAD 到嫁接后的最新 commit 处。</li></ul><h3 id="二、核心用法分类" tabindex="-1">二、核心用法分类 <a class="header-anchor" href="#二、核心用法分类" aria-label="Permalink to &quot;二、核心用法分类&quot;">​</a></h3><h4 id="_1-交互式-rebase-最常用-git-rebase-i" tabindex="-1">1. 交互式 rebase（最常用，<code>git rebase -i</code>） <a class="header-anchor" href="#_1-交互式-rebase-最常用-git-rebase-i" aria-label="Permalink to &quot;1. 交互式 rebase（最常用，\`git rebase -i\`）&quot;">​</a></h4><p>用于修改、合并、删除本地提交（仅限未推送到远程的提交），指令后需跟“要修改的提交的父节点 ID/相对引用”（如 <code>HEAD~3</code> 表示最近 3 个提交，或具体 commit ID）。</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">目标节</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">点</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 例：git rebase -i HEAD~3 （修改最近3个提交）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">共同祖先I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 精准指定起始节点</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>执行后弹出编辑窗口，支持以下指令（缩写/全称均可）：</p><table tabindex="0"><thead><tr><th>指令缩写</th><th>全称</th><th>含义</th></tr></thead><tbody><tr><td>p</td><td>pick</td><td>保留该提交（默认）</td></tr><tr><td>r</td><td>reword</td><td>保留提交，但修改提交说明（仅改备注，不改代码）</td></tr><tr><td>e</td><td>edit</td><td>保留提交，但暂停变基流程，允许修改该提交的代码（改完需手动继续）</td></tr><tr><td>s</td><td>squash</td><td>将该提交合并到<strong>上一个提交</strong>中，保留该提交的备注（合并后可编辑总备注）</td></tr><tr><td>f</td><td>fixup</td><td>同 squash，但丢弃该提交的备注，仅保留代码修改</td></tr><tr><td>x</td><td>exec</td><td>对该提交执行指定的 shell 命令（如 <code>x npm run lint</code>）</td></tr><tr><td>d</td><td>drop</td><td>删除该提交（直接移除，慎用）</td></tr></tbody></table><h4 id="_2-基础变基-非交互式" tabindex="-1">2. 基础变基（非交互式） <a class="header-anchor" href="#_2-基础变基-非交互式" aria-label="Permalink to &quot;2. 基础变基（非交互式）&quot;">​</a></h4><p>将当前分支的提交嫁接到目标分支的最新节点（日常拉取代码常用）：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">目标分</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">支</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 例：git rebase main （把当前分支嫁接到main最新节点）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="三、变基流程中的救场命令" tabindex="-1">三、变基流程中的救场命令 <a class="header-anchor" href="#三、变基流程中的救场命令" aria-label="Permalink to &quot;三、变基流程中的救场命令&quot;">​</a></h3><p>（解决冲突、暂停/放弃变基）</p><table tabindex="0"><thead><tr><th>命令</th><th>用途</th></tr></thead><tbody><tr><td>git rebase --continue</td><td>解决冲突后，继续执行变基流程（需先 <code>git add .</code> 标记冲突已解决）</td></tr><tr><td>git rebase --abort</td><td>放弃本次变基，恢复到变基前的状态（变基出错时首选）</td></tr><tr><td>git rebase --skip</td><td>跳过当前有问题的提交（非必要不使用，可能丢代码）</td></tr></tbody></table><h3 id="四、核心避坑规则-必记" tabindex="-1">四、核心避坑规则（必记） <a class="header-anchor" href="#四、核心避坑规则-必记" aria-label="Permalink to &quot;四、核心避坑规则（必记）&quot;">​</a></h3><ol><li><strong>绝对禁止</strong>在 master/main 等公共分支（多人协作的远程分支）执行 rebase，会修改公共提交历史，导致团队代码冲突；</li><li>仅对<strong>本地未推送</strong>的提交使用 rebase（修改历史），已推送的提交如需调整，改用 <code>git revert</code>；</li><li>变基过程中遇到冲突，需逐个解决（每次解决后 <code>git add .</code> + <code>git rebase --continue</code>），不要强行终止；</li><li>嫁接后原提交的 commit ID 会改变，若已推送过该分支，需强制推送（<code>git push -f</code>），但仅在个人分支执行，公共分支禁止 <code>-f</code>。</li></ol><h3 id="五、常用场景示例-1" tabindex="-1">五、常用场景示例 <a class="header-anchor" href="#五、常用场景示例-1" aria-label="Permalink to &quot;五、常用场景示例&quot;">​</a></h3><h4 id="场景-1-整理本地提交-合并多个零散提交" tabindex="-1">场景 1：整理本地提交（合并多个零散提交） <a class="header-anchor" href="#场景-1-整理本地提交-合并多个零散提交" aria-label="Permalink to &quot;场景 1：整理本地提交（合并多个零散提交）&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 查看最近3个提交的ID</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> log</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --oneline</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 交互式修改最近3个提交</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD~3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 在编辑窗口将多余提交的 p 改为 f/s，保存退出</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. 解决冲突（如有），完成变基</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --continue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="场景-2-拉取远程最新代码并保持历史线性" tabindex="-1">场景 2：拉取远程最新代码并保持历史线性 <a class="header-anchor" href="#场景-2-拉取远程最新代码并保持历史线性" aria-label="Permalink to &quot;场景 2：拉取远程最新代码并保持历史线性&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 切换到个人分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-feature</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 拉取main最新代码并变基（替代 git pull）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fetch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin/main</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 推送变基后的分支（个人分支可强制推送）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-feature</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><h3 id="总结-1" tabindex="-1">总结 <a class="header-anchor" href="#总结-1" aria-label="Permalink to &quot;总结&quot;">​</a></h3><ol><li><code>git rebase -i</code> 是本地整理提交的核心指令，支持修改、合并、删除提交；</li><li>变基的核心是“重新嫁接提交”，会改变原有 commit ID，仅限本地/个人分支使用；</li><li>冲突处理用 <code>git rebase --continue</code>，放弃变基用 <code>git rebase --abort</code>，公共分支绝对不做 rebase。</li></ol><h2 id="git-checkout" tabindex="-1">git checkout <a class="header-anchor" href="#git-checkout" aria-label="Permalink to &quot;git checkout&quot;">​</a></h2><h3 id="一、基础概念-2" tabindex="-1">一、基础概念 <a class="header-anchor" href="#一、基础概念-2" aria-label="Permalink to &quot;一、基础概念&quot;">​</a></h3><p><code>git checkout</code>（检出命令）是 Git 多功能核心命令，核心作用有两类：</p><ol><li>切换工作区的引用（分支、历史 commit、Tag）；</li><li>恢复/撤销工作区的文件修改； <ul><li>⚠️ 新版 Git（2.23+）推荐</li><li><code>git switch</code> 替代「分支切换」</li><li><code>git restore</code> 替代「文件恢复」</li></ul></li></ol><h3 id="二、核心用法分类-按场景" tabindex="-1">二、核心用法分类（按场景） <a class="header-anchor" href="#二、核心用法分类-按场景" aria-label="Permalink to &quot;二、核心用法分类（按场景）&quot;">​</a></h3><h4 id="_1-分支相关操作-最常用" tabindex="-1">1. 分支相关操作（最常用） <a class="header-anchor" href="#_1-分支相关操作-最常用" aria-label="Permalink to &quot;1. 分支相关操作（最常用）&quot;">​</a></h4><table tabindex="0"><thead><tr><th>命令</th><th>含义</th><th>补充说明</th></tr></thead><tbody><tr><td><code>git checkout &lt;分支名称&gt;</code></td><td>切换到本地已存在的指定分支</td><td>切换前建议用 <code>git stash</code> 暂存未提交修改，避免冲突；切换后工作区同步该分支最新代码</td></tr><tr><td><code>git checkout -b &lt;分支名称&gt;</code></td><td>创建并切换到指定分支，保留所有提交记录</td><td>等价于 <code>git branch &lt;分支名&gt;</code> + <code>git checkout &lt;分支名&gt;</code>；可基于指定节点创建：<code>git checkout -b 新分支 目标节点（commit/分支）</code></td></tr><tr><td><code>git checkout --orphan &lt;分支&gt;</code></td><td>创建并切换到“孤儿分支”（无任何提交记录），仅保留当前工作区文件</td><td>用途：清空分支历史（如项目重构）、创建全新根分支；需手动 <code>git commit</code> 后才会生成分支记录</td></tr><tr><td><code>git checkout &lt;远程分支名&gt;</code></td><td>切换到本地不存在、但远程已有的分支（自动创建本地追踪分支）</td><td>等价于 <code>git checkout -b 本地分支名 origin/远程分支名</code>；需先 <code>git fetch</code> 拉取远程分支信息</td></tr></tbody></table><h4 id="_2-文件恢复-撤销修改" tabindex="-1">2. 文件恢复/撤销修改 <a class="header-anchor" href="#_2-文件恢复-撤销修改" aria-label="Permalink to &quot;2. 文件恢复/撤销修改&quot;">​</a></h4><table tabindex="0"><thead><tr><th>命令</th><th>含义</th><th>补充说明</th></tr></thead><tbody><tr><td><code>git checkout &lt;文件路径&gt;</code></td><td>替换本地工作区该文件的改动，恢复到最近一次 commit/暂存区的状态</td><td>新增文件（未 <code>git add</code>）不受影响；已添加到暂存区的内容（<code>git add</code> 后）也不受影响</td></tr><tr><td><code>git checkout -- &lt;文件路径&gt;</code></td><td>显式撤销工作区文件修改（推荐写法，避免和分支名冲突）</td><td>⚠️ 危险：撤销的修改无法恢复，执行前确认不需要该改动</td></tr><tr><td><code>git checkout HEAD -- &lt;文件路径&gt;</code></td><td>强制将文件恢复到 HEAD 指向的最新提交版本（覆盖暂存区+工作区）</td><td>比无 HEAD 的写法更精准，适合暂存区也有错误修改的场景</td></tr></tbody></table><h4 id="_3-切换到历史提交-tag-游离-head" tabindex="-1">3. 切换到历史提交/Tag（游离 HEAD） <a class="header-anchor" href="#_3-切换到历史提交-tag-游离-head" aria-label="Permalink to &quot;3. 切换到历史提交/Tag（游离 HEAD）&quot;">​</a></h4><table tabindex="0"><thead><tr><th>命令</th><th>含义</th><th>补充说明</th></tr></thead><tbody><tr><td><code>git checkout &lt;commit ID&gt;</code></td><td>切换到指定历史提交的快照，进入「游离 HEAD（detached HEAD）」状态</td><td>仅用于查看/排查旧代码，<strong>禁止在此状态提交代码</strong>（切回分支后提交会丢失）；回到正常分支：<code>git checkout 原分支名</code></td></tr><tr><td><code>git checkout &lt;Tag 名称&gt;</code></td><td>切换到指定 Tag 对应的版本，同样进入游离 HEAD 状态</td><td>Tag 是版本快照，只读；如需基于 Tag 开发，需创建分支：<code>git checkout -b 新分支 Tag名</code></td></tr></tbody></table><h3 id="三、关键注意事项-避坑必记" tabindex="-1">三、关键注意事项（避坑必记） <a class="header-anchor" href="#三、关键注意事项-避坑必记" aria-label="Permalink to &quot;三、关键注意事项（避坑必记）&quot;">​</a></h3><ol><li><strong>游离 HEAD 风险</strong>：切换到 commit/Tag 后处于游离状态，此时的提交不属于任何分支，切回分支前需通过 <code>git checkout -b 新分支</code> 保留提交，否则会丢失；</li><li><strong>文件撤销不可逆</strong>：<code>git checkout -- 文件</code> 会直接覆盖工作区修改，无备份，执行前建议用 <code>git status</code>/<code>git diff</code> 确认改动；</li><li><strong>分支名与文件名冲突</strong>：若存在和分支名同名的文件，<code>git checkout 名称</code> 会优先识别为分支，需用 <code>git checkout -- 名称</code> 明确指定操作文件；</li><li><strong>新版命令替代</strong>： <ul><li>分支切换 → 优先用 <code>git switch &lt;分支名&gt;</code>（语义更清晰）；</li><li>文件恢复 → 优先用 <code>git restore &lt;文件路径&gt;</code>（拆分后更易理解）；</li><li><code>checkout</code> 可作为兜底，但新手建议分开学 switch/restore。</li></ul></li></ol><h3 id="四、常用场景示例" tabindex="-1">四、常用场景示例 <a class="header-anchor" href="#四、常用场景示例" aria-label="Permalink to &quot;四、常用场景示例&quot;">​</a></h3><h4 id="场景-1-基于远程分支创建本地分支" tabindex="-1">场景 1：基于远程分支创建本地分支 <a class="header-anchor" href="#场景-1-基于远程分支创建本地分支" aria-label="Permalink to &quot;场景 1：基于远程分支创建本地分支&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fetch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 拉取远程所有分支信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 自动创建本地dev分支并追踪origin/dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="场景-2-撤销工作区单个文件的错误修改" tabindex="-1">场景 2：撤销工作区单个文件的错误修改 <a class="header-anchor" href="#场景-2-撤销工作区单个文件的错误修改" aria-label="Permalink to &quot;场景 2：撤销工作区单个文件的错误修改&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/utils.js</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 撤销src/utils.js的所有未提交修改</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="场景-3-基于历史提交创建新分支-保留游离状态的改动" tabindex="-1">场景 3：基于历史提交创建新分支（保留游离状态的改动） <a class="header-anchor" href="#场景-3-基于历史提交创建新分支-保留游离状态的改动" aria-label="Permalink to &quot;场景 3：基于历史提交创建新分支（保留游离状态的改动）&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a1b2c3d</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 切换到历史提交（游离状态）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fix-bug-a1b2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 基于该提交创建新分支，脱离游离状态</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="场景-4-创建孤儿分支-清空历史" tabindex="-1">场景 4：创建孤儿分支（清空历史） <a class="header-anchor" href="#场景-4-创建孤儿分支-清空历史" aria-label="Permalink to &quot;场景 4：创建孤儿分支（清空历史）&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --orphan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new-main</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 创建无历史的孤儿分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 删除原有文件（可选，如需完全清空）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> README.md</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;初始化新分支&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 首次提交，生成分支记录</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr><h3 id="总结-2" tabindex="-1">总结 <a class="header-anchor" href="#总结-2" aria-label="Permalink to &quot;总结&quot;">​</a></h3><ol><li><code>git checkout</code> 核心是「切换引用」和「恢复文件」，新版推荐用 <code>switch</code>（分支）+ <code>restore</code>（文件）拆分；</li><li>分支操作重点记 <code>-b</code>（新建切换）、<code>--orphan</code>（无历史分支）；</li><li>文件操作慎用 <code>--</code> 写法，避免不可逆丢失修改；</li><li>游离 HEAD 只看不改，如需开发需先创建分支。</li></ol><h2 id="git-revert" tabindex="-1">git revert <a class="header-anchor" href="#git-revert" aria-label="Permalink to &quot;git revert&quot;">​</a></h2><h3 id="_1-基础概念" tabindex="-1">1. 基础概念 <a class="header-anchor" href="#_1-基础概念" aria-label="Permalink to &quot;1. 基础概念&quot;">​</a></h3><p><code>git revert</code>（反向提交）核心作用：<strong>创建一个新的提交，抵消指定 commit 的所有代码修改</strong>，仅撤销代码改动，不删除任何历史提交记录，是已推送提交的“安全撤销方式”。</p><ul><li>核心逻辑：与 <code>git reset</code> 完全不同 → reset 是“抹除历史、重置 HEAD 指针”，revert 是“新增提交、抵消改动”；revert 后原提交仍保留在历史中，仅新增一条“撤销提交”，对协作团队无影响。</li></ul><h3 id="_2-核心参数详解" tabindex="-1">2. 核心参数详解 <a class="header-anchor" href="#_2-核心参数详解" aria-label="Permalink to &quot;2. 核心参数详解&quot;">​</a></h3><table tabindex="0"><thead><tr><th>命令格式</th><th>含义</th><th>补充说明</th></tr></thead><tbody><tr><td><code>git revert &lt;commit ID&gt;</code>（默认 -e）</td><td>抵消指定 commit 的改动，弹出编辑窗口让你修改新提交的备注（-e = --edit）</td><td>默认行为，推荐保留备注（清晰说明“撤销了哪个提交”）</td></tr><tr><td><code>git revert --no-edit &lt;commit ID&gt;</code></td><td>抵消指定 commit 的改动，不弹出编辑窗口，使用默认备注（“Revert xxx”）</td><td>批量撤销时常用，节省时间</td></tr><tr><td><code>git revert -n / --no-commit &lt;commit ID&gt;</code></td><td>抵消指定 commit 的改动，但不自动创建新提交，仅将改动同步到暂存区+工作区</td><td>用途：1. 批量撤销多个 commit 后合并为一个新提交；2. 撤销后需手动调整代码再提交</td></tr><tr><td><code>git revert HEAD</code></td><td>快速撤销<strong>最近一次提交</strong>（已推送/未推送均可）</td><td>最常用场景，无需查 commit ID</td></tr><tr><td><code>git revert &lt;commit1&gt;..&lt;commit2&gt;</code></td><td>批量撤销从 commit1 到 commit2 的所有提交（左开右闭，需按顺序）</td><td>例：<code>git revert A..D</code> 撤销 B、C、D 三个提交；需解决多次冲突（如有）</td></tr></tbody></table><h3 id="_3-冲突处理-必记" tabindex="-1">3. 冲突处理（必记） <a class="header-anchor" href="#_3-冲突处理-必记" aria-label="Permalink to &quot;3. 冲突处理（必记）&quot;">​</a></h3><p>revert 过程中若出现代码冲突（比如被撤销的 commit 代码已被后续提交修改），处理流程：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 解决文件中的冲突（标记为 &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD 的部分）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 标记冲突已解决</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 继续执行 revert 流程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> revert</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --continue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># （可选）放弃本次 revert</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> revert</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --abort</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_4-避坑规则" tabindex="-1">4. 避坑规则 <a class="header-anchor" href="#_4-避坑规则" aria-label="Permalink to &quot;4. 避坑规则&quot;">​</a></h3><ul><li>仅撤销“代码改动”：revert 只抵消指定 commit 的代码修改，不会删除该 commit 的历史记录；</li><li>已推送提交首选：所有推送到公共分支的提交，如需撤销，<strong>必须用 revert</strong>（禁止用 reset/rebase 修改历史）；</li><li>重复 revert：若 revert 后想恢复被撤销的 commit，需再次 revert 该“撤销提交”（而非直接 reset）。</li></ul><h3 id="_5-常用场景示例" tabindex="-1">5. 常用场景示例 <a class="header-anchor" href="#_5-常用场景示例" aria-label="Permalink to &quot;5. 常用场景示例&quot;">​</a></h3><h4 id="场景-1-撤销已推送的最近一次提交-安全" tabindex="-1">场景 1：撤销已推送的最近一次提交（安全） <a class="header-anchor" href="#场景-1-撤销已推送的最近一次提交-安全" aria-label="Permalink to &quot;场景 1：撤销已推送的最近一次提交（安全）&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> revert</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-edit</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 撤销最近一次提交，不编辑备注</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 推送新的撤销提交，团队同步</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="场景-2-批量撤销多个提交并合并为一个" tabindex="-1">场景 2：批量撤销多个提交并合并为一个 <a class="header-anchor" href="#场景-2-批量撤销多个提交并合并为一个" aria-label="Permalink to &quot;场景 2：批量撤销多个提交并合并为一个&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 撤销 A、B 两个提交，不自动创建 commit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> revert</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> A</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> revert</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> B</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 手动调整代码（如有），合并为一个新提交</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;撤销 A、B 两个提交的错误改动&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><h2 id="git-merge" tabindex="-1">git merge <a class="header-anchor" href="#git-merge" aria-label="Permalink to &quot;git merge&quot;">​</a></h2><h3 id="_1-基础概念-1" tabindex="-1">1. 基础概念 <a class="header-anchor" href="#_1-基础概念-1" aria-label="Permalink to &quot;1. 基础概念&quot;">​</a></h3><p><code>git merge</code>（合并）核心作用：<strong>将指定分支的提交记录合并到当前所在分支</strong>，是多分支协作的核心命令。</p><ul><li>核心逻辑：找到两个分支的<strong>共同祖先节点</strong>，对比当前分支和目标分支的最新节点差异，生成一个“合并提交”（除非是 Fast-forward 合并），保留所有分支的历史记录。</li></ul><h3 id="_2-核心用法" tabindex="-1">2. 核心用法 <a class="header-anchor" href="#_2-核心用法" aria-label="Permalink to &quot;2. 核心用法&quot;">​</a></h3><table tabindex="0"><thead><tr><th>命令格式</th><th>含义</th><th>补充说明</th></tr></thead><tbody><tr><td><code>git merge &lt;目标分支名&gt;</code></td><td>将指定分支的代码合并到当前分支（如在 main 分支执行 <code>git merge dev</code>）</td><td>合并前建议先拉取远程最新代码：<code>git pull --rebase</code></td></tr><tr><td><code>git merge --no-ff &lt;目标分支名&gt;</code></td><td>强制生成合并提交（禁用 Fast-forward 合并），保留分支合并记录</td><td>团队协作推荐使用，可清晰看到“哪次合并来自哪个分支”</td></tr><tr><td><code>git merge --abort</code></td><td>合并过程中出现冲突，放弃本次合并，恢复到合并前的状态</td><td>冲突无法解决时使用，避免代码混乱</td></tr><tr><td><code>git merge --continue</code></td><td>解决冲突后，继续完成合并流程</td><td>需先 <code>git add .</code> 标记冲突已解决</td></tr></tbody></table><h3 id="_3-合并类型-关键区别" tabindex="-1">3. 合并类型（关键区别） <a class="header-anchor" href="#_3-合并类型-关键区别" aria-label="Permalink to &quot;3. 合并类型（关键区别）&quot;">​</a></h3><table tabindex="0"><thead><tr><th>合并类型</th><th>触发条件</th><th>效果</th></tr></thead><tbody><tr><td>Fast-forward（快进）</td><td>目标分支是当前分支的直接后继（无分叉），共同祖先后当前分支无新提交</td><td>不生成合并提交，直接将当前分支 HEAD 指向目标分支最新节点，历史线性</td></tr><tr><td>普通合并（No-ff）</td><td>两个分支有分叉（共同祖先后双方都有新提交），或显式指定 <code>--no-ff</code></td><td>生成一个新的“合并 commit”，历史会出现分叉，保留分支合并轨迹</td></tr></tbody></table><h3 id="_4-冲突处理-合并核心难点" tabindex="-1">4. 冲突处理（合并核心难点） <a class="header-anchor" href="#_4-冲突处理-合并核心难点" aria-label="Permalink to &quot;4. 冲突处理（合并核心难点）&quot;">​</a></h3><p>合并冲突是多分支协作的常见场景，处理流程：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 执行合并，触发冲突</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> merge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 查看冲突文件（git status 会标记为 both modified）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 打开冲突文件，解决 &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD 到 &gt;&gt;&gt;&gt;&gt;&gt;&gt; dev 之间的代码冲突</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. 标记冲突已解决</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. 完成合并（自动生成合并提交）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> merge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --continue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># （可选）放弃合并</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> merge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --abort</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_5-避坑规则" tabindex="-1">5. 避坑规则 <a class="header-anchor" href="#_5-避坑规则" aria-label="Permalink to &quot;5. 避坑规则&quot;">​</a></h3><ul><li>合并前清理工作区：确保当前分支工作区无未提交修改（用 <code>git stash</code> 暂存），避免合并冲突叠加；</li><li>优先拉取最新代码：合并前执行 <code>git pull --rebase</code> 拉取远程最新，减少冲突概率；</li><li>公共分支合并规范：合并功能分支到 main/dev 前，建议先在功能分支 rebase 目标分支（减少合并提交）。</li></ul><h3 id="_6-常用场景示例" tabindex="-1">6. 常用场景示例 <a class="header-anchor" href="#_6-常用场景示例" aria-label="Permalink to &quot;6. 常用场景示例&quot;">​</a></h3><h4 id="场景-1-常规合并-功能分支合并到-main" tabindex="-1">场景 1：常规合并（功能分支合并到 main） <a class="header-anchor" href="#场景-1-常规合并-功能分支合并到-main" aria-label="Permalink to &quot;场景 1：常规合并（功能分支合并到 main）&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 切换到主分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rebase</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 拉取远程最新</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> merge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-ff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> feature/login</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 合并登录功能分支，强制生成合并提交</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 推送合并结果</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="场景-2-合并冲突处理示例" tabindex="-1">场景 2：合并冲突处理示例 <a class="header-anchor" href="#场景-2-合并冲突处理示例" aria-label="Permalink to &quot;场景 2：合并冲突处理示例&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> merge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 触发冲突</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 解决 src/app.js 冲突后</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/app.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> merge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --continue</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 完成合并</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr><h2 id="reset-vs-revert-vs-merge" tabindex="-1">reset vs revert vs merge <a class="header-anchor" href="#reset-vs-revert-vs-merge" aria-label="Permalink to &quot;reset vs revert vs merge&quot;">​</a></h2><table tabindex="0"><thead><tr><th>命令</th><th>核心目的</th><th>是否修改历史</th><th>已推送可用？</th><th>适用场景</th></tr></thead><tbody><tr><td><code>git reset</code></td><td>本地回退/撤销提交</td><td>✅ 抹除历史</td><td>❌ 绝对禁止</td><td>本地未推送的错误提交</td></tr><tr><td><code>git revert</code></td><td>撤销指定提交的代码改动</td><td>❌ 新增提交</td><td>✅ 最安全</td><td>已推送的错误提交、公共分支</td></tr><tr><td><code>git merge</code></td><td>合并分支代码</td><td>❌ 新增提交</td><td>✅ 正常使用</td><td>多分支协作、功能合并</td></tr></tbody></table><hr><h3 id="总结-3" tabindex="-1">总结 <a class="header-anchor" href="#总结-3" aria-label="Permalink to &quot;总结&quot;">​</a></h3><ol><li><code>git revert</code> 是已推送提交的“安全撤销工具”，核心是“新增提交抵消改动”，不删历史；</li><li><code>git merge</code> 是分支合并核心，推荐用 <code>--no-ff</code> 保留合并记录，冲突需逐文件解决；</li><li>三者核心区别：reset 改本地历史、revert 安全撤销代码、merge 合并分支，已推送场景优先用 revert/merge。</li></ol><h2 id="git-cherry-pick" tabindex="-1">git cherry-pick <a class="header-anchor" href="#git-cherry-pick" aria-label="Permalink to &quot;git cherry-pick&quot;">​</a></h2><ul><li>把已经提交的记录合并到当前分支。</li><li>git cherry-pick <code>commit ID</code></li><li>pick 两个节点 1 和 3</li><li>git cherry-pick <code>commit ID1</code> <code>commit ID3</code></li><li>pick （节点 1，节点 3] 不包含节点 1</li><li>git cherry-pick <code>commit ID1</code> .. <code>commit ID3</code></li><li>pick [节点 1，节点 3] 包含节点 1</li><li>git cherry-pick <code>commit ID1</code> ^.. <code>commit ID3</code></li></ul><h2 id="git-tag" tabindex="-1">git tag <a class="header-anchor" href="#git-tag" aria-label="Permalink to &quot;git tag&quot;">​</a></h2><p>操作标签的命令。</p><ul><li><p>打印所有的标签</p></li><li><p>git tag</p></li><li><p>添加轻量标签，指向提交对象的引用，可以指定之前的提交记录</p></li><li><p>git tag <code>标签名称</code> <code>commit ID</code></p></li><li><p>添加带有描述信息的附注标签，可以指定之前的提交记录</p></li><li><p>git tag -a <code>标签名称</code> -m <code>标签描述信息</code> <code>commit ID</code></p></li><li><p>切换到指定的标签</p></li><li><p>git checkout <code>标签名称</code></p></li><li><p>查看标签的信息</p></li><li><p>git show <code>标签名称</code></p></li><li><p>删除指定的标签</p></li><li><p>git tag -d <code>标签名称</code></p></li></ul><h2 id="git-mv" tabindex="-1">git mv <a class="header-anchor" href="#git-mv" aria-label="Permalink to &quot;git mv&quot;">​</a></h2><ul><li>重命名文件或者文件夹。</li><li>重命名指定的文件或者文件夹</li><li>git mv <code>源文件/文件夹</code> <code>目标文件/文件夹</code></li></ul><h2 id="git-rm" tabindex="-1">git rm <a class="header-anchor" href="#git-rm" aria-label="Permalink to &quot;git rm&quot;">​</a></h2><ul><li><p>删除文件或者文件夹。</p></li><li><p>移除跟踪指定的文件，并从本地仓库的文件夹中删除</p></li><li><p>git rm <code>文件路径</code></p></li><li><p>移除跟踪指定的文件夹，并从本地仓库的文件夹中删除</p></li><li><p>git rm -r <code>文件夹路径</code></p></li><li><p>移除跟踪指定的文件，在本地仓库的文件夹中保留该文件</p></li><li><p>git rm --cached</p></li></ul><h2 id="git-remote" tabindex="-1">git remote <a class="header-anchor" href="#git-remote" aria-label="Permalink to &quot;git remote&quot;">​</a></h2><ul><li><p>操作远程库。</p></li><li><p>列出已经存在的远程仓库</p></li><li><p>git remote</p></li><li><p>列出远程仓库的详细信息，在别名后面列出 URL 地址</p></li><li><p>git remote -v</p></li><li><p>git remote --verbose</p></li><li><p>添加远程仓库</p></li><li><p>git remote add <code>远程仓库的别名</code> <code>远程仓库的URL地址</code></p></li><li><p>修改远程仓库的别名</p></li><li><p>git remote rename <code>原远程仓库的别名</code> <code>新的别名</code></p></li><li><p>删除指定名称的远程仓库</p></li><li><p>git remote remove <code>远程仓库的别名</code></p></li><li><p>修改远程仓库的 URL 地址</p></li><li><p>git remote set-url <code>远程仓库的别名</code> <code>新的远程仓库URL地址</code></p></li></ul><h2 id="git-pull" tabindex="-1">git pull <a class="header-anchor" href="#git-pull" aria-label="Permalink to &quot;git pull&quot;">​</a></h2><p>从远程仓库获取最新版本并合并到本地。</p><ul><li><p>首先会执行 git fetch，然后执行 git merge，把获取的分支的 HEAD 合并到当前分支。</p></li><li><p>从远程仓库获取最新版本。</p></li><li><p>git pull</p></li><li><p>git pull --rebase <code>远程仓库的别名</code> <code>分支名称</code></p></li><li><p>从远程仓库获取最新版本并变基到当前分支。</p></li></ul><h2 id="git-push" tabindex="-1">git push <a class="header-anchor" href="#git-push" aria-label="Permalink to &quot;git push&quot;">​</a></h2><p>把本地仓库的提交推送到远程仓库。</p><ul><li><p>把本地仓库的分支推送到远程仓库的指定分支</p></li><li><p>git push <code>远程仓库的别名</code> <code>本地分支名</code>:<code>远程分支名</code></p></li><li><p>将指定的标签提交到远程仓库</p></li><li><p>git push <code>远程仓库的别名</code> <code>标签名称</code></p></li><li><p>将本地所有的标签全部提交到远程仓库</p></li><li><p>git push <code>远程仓库的别名</code> –tags</p></li><li><p>删除指定的远程仓库的分支</p></li><li><p>git push <code>远程仓库的别名</code> :<code>远程分支名</code></p></li><li><p>git push <code>远程仓库的别名</code> --delete <code>远程分支名</code></p></li></ul><h2 id="git-clone" tabindex="-1">git clone <a class="header-anchor" href="#git-clone" aria-label="Permalink to &quot;git clone&quot;">​</a></h2><ul><li><p>只拉取最近的一个 revision git clone --depth=1</p></li><li><p>拉取指定分支 git clone -b dev</p></li><li><p>只克隆一个裸仓库 git clone --bare **.git</p></li></ul><h2 id="git-branch" tabindex="-1">git branch <a class="header-anchor" href="#git-branch" aria-label="Permalink to &quot;git branch&quot;">​</a></h2><ul><li><p>操作 Git 的分支命令。</p></li><li><p>列出本地的所有分支，当前所在分支以 &quot;*&quot; 标出</p></li><li><p>git branch</p></li><li><p>列出本地的所有分支并显示最后一次提交，当前所在分支以 &quot;*&quot; 标出</p></li><li><p>git branch -v</p></li><li><p>创建新分支，新的分支基于上一次提交建立</p></li><li><p>git branch <code>分支名</code></p></li><li><p>修改分支名称</p></li><li><p>如果不指定原分支名称则为当前所在分支</p></li><li><p>git branch -m <code>原分支名称</code> <code>新的分支名称</code></p></li><li><p>强制修改分支名称</p></li><li><p>git branch -M <code>原分支名称</code> <code>新的分支名称</code></p></li><li><p>删除指定的本地分支</p></li><li><p>git branch -d <code>分支名称</code></p></li><li><p>强制删除指定的本地分支</p></li><li><p>git branch -D <code>分支名称</code></p></li></ul><h2 id="git-fetch" tabindex="-1">git fetch <a class="header-anchor" href="#git-fetch" aria-label="Permalink to &quot;git fetch&quot;">​</a></h2><ul><li><p>从远程仓库获取最新的版本到本地的 tmp 分支上。</p></li><li><p>将远程仓库所有分支的最新版本全部取回到本地</p></li><li><p>git fetch <code>远程仓库的别名</code></p></li><li><p>将远程仓库指定分支的最新版本取回到本地</p></li><li><p>git fetch <code>远程主机名</code> <code>分支名</code></p></li></ul><h2 id="git-diff" tabindex="-1">git diff <a class="header-anchor" href="#git-diff" aria-label="Permalink to &quot;git diff&quot;">​</a></h2><ul><li><p>比较版本之间的差异。</p></li><li><p>比较当前文件和暂存区中文件的差异，显示没有暂存起来的更改</p></li><li><p>git diff</p></li><li><p>比较暂存区中的文件和上次提交时的差异</p></li><li><p>git diff --cached</p></li><li><p>git diff --staged</p></li><li><p>比较当前文件和上次提交时的差异</p></li><li><p>git diff HEAD</p></li><li><p>查看从指定的版本之后改动的内容</p></li><li><p>git diff <code>commit ID</code></p></li><li><p>比较两个分支之间的差异</p></li><li><p>git diff <code>分支名称</code> <code>分支名称</code></p></li></ul>`,168)]))}const F=s(l,[["render",n]]);export{b as __pageData,F as default};
